"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[7498],{95050:(e,t,o)=>{o.d(t,{Z:()=>d});var r=o(94809),n=o(67294),i=o(89034),a=o(87077);const s=(0,r.default)("div",{target:"e1j92jav0"})("width:390px;position:fixed;max-width:100%;background:",(e=>{let{background:t}=e;return t}),";border-radius:2px;z-index:11;border:1px solid rgba(0,0,0,0.2);box-shadow:0 0 30px 6px rgba(0,0,0,0.15);top:0;right:0;height:100%;&.partial-modal{top:50%;left:50%;width:100%;transform:translate(-50%,-50%);height:auto;max-width:500px;overflow:hidden;max-width:500px;}&.stick-to-bottom{top:unset;bottom:0;margin:auto;max-width:500px;transform:translateX(-50%);overflow:hidden;}"),l=(0,r.default)("div",{target:"e1j92jav1"})({name:"1oh9hm3",styles:"position:fixed;top:0;right:0;height:100%;width:100%;background-color:rgba(0,0,0,0.5);z-index:10;.hide-overlay{z-index:1;background-color:rgba(0,0,0,0);}"}),c=e=>{let{children:t,onHide:o,allowBackdropClick:r=!0,modalContentClass:c="",modalBackground:d="#fff",isVisible:u,isPartial:p,isStickBottom:g,contentStyle:m}=e;const[v,f]=(0,n.useState)(u);(0,n.useEffect)((()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow="visible"})),[]);const h=`${c} ${g?"stick-to-bottom":""} ${p?"partial-modal":""} `,E=v?"":"hide-overlay",y=r?()=>{f(!0),o()}:()=>{};return(0,a.jsx)(i.Z,null,(0,a.jsx)(s,{className:h,background:d,style:m},t),(0,a.jsx)(l,{className:E,onClick:y}))},d=(0,n.memo)(c)},89034:(e,t,o)=>{o.d(t,{Z:()=>l});var r=o(67294),n=o(73935);function i(e,t,o){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}let a;class s extends r.PureComponent{constructor(){super(...arguments),i(this,"state",{isMounted:!1}),i(this,"portalNode",void 0),i(this,"el",void 0)}render(){return!1===this.state.isMounted?null:(0,n.createPortal)(this.props.children,this.el)}componentDidMount(){this.el=document.createElement("div"),this.portalNode=(()=>{if(void 0!==a)return a;const e=document.getElementById("portal-root");if(null===e)throw new Error("Portal Element not Found");return a=e,a})(),this.portalNode.appendChild(this.el),this.setState({isMounted:!0})}componentWillUnmount(){this.portalNode.removeChild(this.el)}}const l=s},27498:(e,t,o)=>{o.d(t,{Z:()=>Be});var r=o(67294),n=o(56710),i=o(52019),a=o(95050),s=o(46467),l=o(20736),c=o(93981),d=o(69153),u=o(50642),p=o(29739),g=o(98541),m=o(42704),v=o(49765),f=o(95463),h=o(67190),E=o(58752),y=o(50868),S=o(43254),T=o(69147),b=o(50864),O=o(60143),C=o(97739),_=o(15039),w=o(72618);const D=w.z.div`
  width: 100%;
  height: 100vh;
  background-color: ${e=>{let{theme:t}=e;return t.colors.surface}};
  .capitalize-uppercase {
    p {
      text-transform: lowercase;
      display: inline-block;
      &::first-line {
        text-transform: capitalize;
      }
      &::first-letter {
        text-transform: capitalize;
      }
    }
  }
`,I=w.z.div`
  position: relative;
`,P=w.z.div`
  -webkit-font-smoothing: antialiased;
  display: flex;
  flex-direction: column;
  padding: 20px;
  padding-top: 60px;
  padding-bottom: 60px;
  overflow: auto;
  height: 100vh;
  background-color: ${e=>{let{theme:t}=e;return t.colors.surface}};
  .flip-card {
    perspective: 1000px;
    height: auto;
    .flip-card-back {
      display: none;
      min-height: 150px;
    }
    &.flipped {
      .flip-card-back {
        position: relative;
        display: block;
      }
    }
  }

  .flip-card-inner {
    position: relative;
    transition: transform 0.6s;
    width: 100%;
  }

  .flip-card-front {
    position: relative;
    -webkit-backface-visibility: hidden;
    backface-visibility: hidden;
  }
  .flip-card-back {
    position: absolute;
    top: 0px;
  }

  .flip-card-back {
    width: 100%;
  }
`,R=w.z.div``,j=(w.z.div``,w.z.div`
  background-image: url(${e=>{let{cartFreeGiftBanner:t}=e;return null==t?void 0:t.pickGiftBgImage}});
  background-size: cover;
  background-repeat: no-repeat;
  border-radius: ${e=>{let{theme:t}=e;return t.spacing.spacing40}};
  cursor: pointer;
  margin: 6px 0px;
`),x=w.z.div`
  height: 42px;
  display: flex;
  align-items: center;
  padding-left: 70px;
  color: ${e=>{let{theme:t}=e;return t.colors.textPrimary}};
  text-overflow: ellipsis;
  ${e=>{let{theme:t}=e;return t.typography.titleXSmall}};
`,k=(w.z.div``,w.z.div`
  -moz-backface-visibility: hidden;
`,w.z.div``,w.z.div``,w.z.div``,w.z.div``,w.z.div`
  position: relative;
  width: 100%;
  bottom: 0;
`),A=(w.z.img``,w.z.div`
  display: flex;
  justify-content: center;
  align-items: center;
`,w.z.div`
  background-color: ${e=>{let{theme:t}=e;return t.colors.surface}};
  padding: ${e=>{let{theme:t}=e;return`${t.spacing.spacing320} ${t.spacing.spacing50} ${t.spacing.spacing50} ${t.spacing.spacing50}`}};
`),M=w.z.div`
  padding: ${e=>{let{theme:t}=e;return`${t.spacing.spacing320} ${t.spacing.spacing50} ${t.spacing.spacing0} ${t.spacing.spacing50}`}};
`,F=w.z.div`
  margin-bottom: ${e=>{let{theme:t}=e;return t.spacing.spacing160}};
`,B=w.z.div`
  position: relative;
`;var N=o(21315),L=o(78756),V=o(87077);const K=e=>{let{showPickFreeSampleScreen:t,handleFreeSampleBack:o}=e;const r=(0,N.n)(),{quantity:i}=(0,n.v9)((e=>e.cartReducer.cartInfo)),{freeSampleMessage:a=""}=(0,n.v9)((e=>e.cartReducer.freeSamples))||{freeSampleMessage:""},s=(0,n.v9)((e=>{var t;return null===(t=e.remoteConfig.switches)||void 0===t?void 0:t.cartDesignUpdate})),{DYNAMIC_ITEMS:l,DYNAMIC_ITEM:c,BAG:d,VIEW_WISHLIST:u,SHOPPING_BAG:p}=C.CART_TEXT_MESSAGES;let g=d,m=u;r||(m="");let v="";i&&(v=(0,_.Yl)(i>1?l:c,{count:i})),t&&(g=a,v="",m=""),s&&(g=`${p} ${i>0?`(${i})`:""}`,v="");const f={isGuest:!r,title:g,subTitle:v,wishlistBtn:{text:m,action:()=>{window.location.href=L.pages.WISHLIST_PAGE}},leadingIconAction:()=>{var e;t?o():null===(e=window)||void 0===e||e.closeCart()},overrides:{style:{position:"absolute"}}};return(0,V.jsx)(I,null,(0,V.jsx)(O.Z,f))};var G=o(90302);const W=()=>{const e=(0,n.v9)((e=>{var t,o;return null===(t=e.remoteConfig.configs)||void 0===t||null===(o=t.cartGenericMessages)||void 0===o?void 0:o.notificationBanner}))||{status:!1,message:""};return e.status?(0,V.jsx)(R,null,(0,V.jsx)(G.ZP,{variant:G.c7.inline,withIcon:!0,kind:G.TO.info,message:e.message})):(0,V.jsx)(r.Fragment,null)},$=e=>{let{clickHandler:t}=e;const{freeSampleData:o}=(0,n.v9)((e=>e.cartReducer.cartInfo)),r=(0,n.v9)((e=>e.remoteConfig.configs.cartFreeGiftBanner))||{},{freeSampleMessage:i}=o||{};return i?(0,V.jsx)(j,{onClick:t,cartFreeGiftBanner:r},i&&(0,V.jsx)(x,null,i)):null};var H=o(55779),Y=o(93513);function U(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,r)}return o}function Z(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?U(Object(o),!0).forEach((function(t){var r,n,i;r=e,n=t,i=o[t],(n=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(n))in r?Object.defineProperty(r,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[n]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):U(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}const z=e=>{let{isConvenienceFeeEnabled:t}=e;const o=(0,n.I0)(),[i,a]=(0,r.useState)(!1),{rewardsDTO:l,pincode:c}=(0,n.v9)((e=>e.cartReducer.cartInfo)),d=(0,n.v9)((e=>{var t;return null===(t=e.remoteConfig.switches)||void 0===t?void 0:t.rewardPointRedemptionRestriction}))||!1,u=(0,n.v9)((e=>{var t;return null===(t=e.remoteConfig.switches)||void 0===t?void 0:t.cartEddWidget}))||!1,p=(0,r.useMemo)((()=>d&&0===(null==l?void 0:l.rewardsRedeemable)&&Boolean(null==l?void 0:l.rewardRestrictionMessage)),[d,l]),g=(0,r.useCallback)((async()=>{if(p)return;a(!0);let e={deviceType:v.n6.DESKTOP,originSource:v.di.CART,headers:{[Y.CE]:u},pincode:c,domain:"nykaa",catalog_tag_filter:"nykaa"};try{null!=l&&l.rewardsApplied?await(0,s.W5)(e,t)(o):(e=Z(Z({},e),{},{used:null==l?void 0:l.rewardsAvailable}),await(0,s.OD)(e,t)(o))}catch(e){console.error("Error handling reward points:",e)}finally{a(!1)}}),[p,u,l,c,o,t]);return(0,V.jsx)(H.Z,{rewardsDTO:l,isRedemptionRestricted:d,handleRewardPoints:g,loading:i})};var q=o(92968);const X=e=>{let{togleShowRestoreBag:t,freeSamplesCommunicationDTO:o,isConvenienceFeeEnabled:r}=e;const i=(0,n.I0)(),{pincode:a}=(0,n.v9)((e=>e.cartReducer.cartInfo)),{cartEddWidget:l}=(0,n.v9)((e=>e.remoteConfig.switches)),{totalItemsRemoved:c,removedItemDTOList:d}=o||{},{DYNAMIC_NO_DONT_WANT_FREEBIES:u,DYNAMIC_SORRY_DUE_TO_REMOVAL_OF_SOME_PRODUCTS_YOUR_1_FREE_SAMPLES_HAVE_BEEN_REMOVED:p,RESTORE_BAG:g}=C.CART_TEXT_MESSAGES,m=(0,_.Yl)(u,{count:c}),f=(0,_.Yl)(p,{count:c}),h=null==d?void 0:d[0],E={titleHTML:f,subtitle:null==h?void 0:h.name,onClose:()=>{t()},isVisible:!0,restoreBtn:{text:g,onClick:async()=>{const e={deviceType:v.n6.DESKTOP,pincode:a,originSource:v.di.CART,headers:{[Y.CE]:l},domain:"nykaa",catalog_tag_filter:"nykaa"};try{const t=await(0,S.Pu)(e,r);t&&(0,s.$I)(t)(i)}catch(e){const{message:t}=e;(0,s.gk)(t)(i)}}},noFreebiesBtn:{text:m,onClick:()=>{t()}},deviceType:v.n6.DESKTOP};return(0,V.jsx)(q.Z,E)};var Q=o(20554),J=o(50569),ee=o(1107),te=o(31293),oe=o(64889);function re(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,r)}return o}function ne(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?re(Object(o),!0).forEach((function(t){var r,n,i;r=e,n=t,i=o[t],(n=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(n))in r?Object.defineProperty(r,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[n]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):re(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}const ie=e=>{let{toggleShowOOSBottomSheet:t,isConvenienceFeeEnabled:o}=e;const i=(0,n.I0)(),a=(0,n.v9)((e=>e.cartReducer.cartInfo)),{freeSampleData:l,items:c,addressDTO:d,cartPriceDTO:u,error:p}=a||{},g=(0,N.n)(),{cartDesignUpdate:m,cartShowSavingStrip:h}=(0,n.v9)((e=>e.remoteConfig.switches))||!1,E=(0,n.v9)((e=>(0,oe.gi)(e,te.sp,"A")))||!1,{GRAND_TOTAL:y,PROCEED:S,WITHOUT_FREEBIES:O,PROCEED_TO_PAY:w,ADD_ADDRESS:D}=C.CART_TEXT_MESSAGES,{grandTotal:I,bagTotal:P}=u||{},R=(0,_.RA)(c),j=(0,_.h_)(c,[v.i_]),x=(0,r.useMemo)((()=>{let e=S;return E&&(e=w,d||(e=D)),e}),[E,d]),A=(0,r.useMemo)((()=>{let e="";return((null==l?void 0:l.eligibleCount)||0)>0&&(e=O,(null==l?void 0:l.eligibleCount)==(null==l?void 0:l.claimedCount)&&(e="")),E&&(e=""),e}),[l]),M={grandTotalText:y,grandTotalValue:`₹${I}`,showGrandTotalIcon:!0,bagTotalValue:P,proceedBtnTitle:x,proceedBtnSubtitle:A,grandTotalIconClickHandler:()=>{const e=document.getElementById("payment_details");(0,_.kI)(e)},proceedBtnClickHandler:()=>{try{if(R.length>0)return g?void t():void(window.location.href=L.pages.CHECKOUT_AUTH_PAGE);if(j){const e=document.getElementById(`${null==j?void 0:j.productId}`);return void(0,_.kI)(e)}if(null!=p&&p.errorMessage)return void(0,s.gk)(null==p?void 0:p.errorMessage)(i);const e=(0,b.E)(T.l.PROCEED,ne(ne({proceedBtnText:x},a),{},{isConvenienceFeeEnabled:o}));(0,ee.WC)(e.gtmData),window.location.href=L.pages.CHECKOUT_AUTH_PAGE}catch(e){f.k.error(e,"Error occurred while proceeding to checkout")}},showFooterV2:m,overrides:{style:{position:"absolute",bottom:0,left:0,right:0}}};return(0,V.jsx)(k,null,h&&(0,V.jsx)(B,null,(0,V.jsx)(J.Z,{cartInfo:a,deviceType:v.n6.DESKTOP})),(0,V.jsx)(Q.Z,M))};var ae=o(94641),se=o(74155),le=o(64942);const ce=e=>{let{togleShowPickFreeSamplesScreen:t,isConvenienceFeeEnabled:o}=e;const r=(0,n.I0)(),{pincode:i}=(0,n.v9)((e=>e.cartReducer.cartInfo)),a=(0,n.v9)((e=>e.cartReducer.freeSamples)),{eligibleCount:l,freeSamplesDataDTOList:c}=a||{},{ADDED_TO_BAG:d,REMOVE:u,DONE:p,ADD_TO_BAG:g}=C.CART_TEXT_MESSAGES,m=(0,n.v9)((e=>e.remoteConfig.switches.cartEddWidget))||!1;if(!l)return(0,V.jsx)(M,null,(0,V.jsx)(ae.Z,{type:v.GI.PICK_FREE_SAMPLES}),(0,V.jsx)(ae.Z,{type:v.GI.PICK_FREE_SAMPLES}));const f=null==c?void 0:c.map((e=>{var t;return{title:(null==e?void 0:e.freeSampleMessage)||"",offerCode:`Offer: ${(null==e?void 0:e.offerText)||""}`,freeSampleCards:null==e||null===(t=e.freeSampleProductDataDTOList)||void 0===t?void 0:t.map((t=>{const{showProductStatus:n,productId:a="",name:l,imageUrl:c}=t,{claimedCount:p=0,eligibleCount:f=0}=e,h={productId:a,tag:n==v.R4.APPLIED&&d||"",productName:l,addToBagBtn:{text:n==v.R4.APPLIED?u:g,onClick:()=>(async e=>{const{showProductStatus:t,productId:n,ruleId:a}=e.product,{offerClaimedCount:l=0,offerEligibleCount:c=0}=e.offerCount||{};if(t!==v.R4.NOT_APPLIED||l!==c){const e=t==v.R4.APPLIED?v.p8.remove:v.p8.add,l={deviceType:v.n6.DESKTOP,pincode:i,type:e,items:[{productId:n,sourceRuleId:a,quantity:1}],originSource:v.di.CART,headers:{[Y.CE]:m},domain:"nykaa",catalog_tag_filter:"nykaa"},c=e===v.p8.remove?S.fx:S.su;try{const e=await c(l,o);r({type:le.Z.SET_FREE_SAMPLES,payload:e})}catch(e){const{message:t}=e;(0,s.gk)(t)(r)}}})({product:t,offerCount:{offerClaimedCount:p,offerEligibleCount:f}}),isDisabled:n==v.R4.NOT_APPLIED&&p===f},image:{url:c}};return h}))}}));return(0,V.jsx)(A,null,(0,V.jsx)(se.Z,{offerFreeSamples:f,doneBtn:{text:p,onClick:t}}))};var de=o(69497);const ue=e=>{let{fetchCartInfo:t,isConvenienceFeeEnabled:o}=e;const i=(0,n.I0)(),{items:a,shippingDataDTO:l,cartPriceDTO:c,pincode:d}=(0,n.v9)((e=>e.cartReducer.cartInfo)),[u,p]=(0,r.useState)({products:[]}),g=(0,n.v9)((e=>{var t;return null===(t=e.remoteConfig.switches)||void 0===t?void 0:t.cartEddWidget}))||!1;(0,r.useEffect)((()=>{null!=a&&a.length&&(async()=>{const e={deviceType:v.n6.DESKTOP,ids:a.map((e=>e.productId)).join(","),pincode:d,originSource:v.di.CART,headers:{[Y.CE]:g},domain:"nykaa",catalog_tag_filter:"nykaa"};try{const t=await(0,S.W$)(e);t&&p(t)}catch(e){f.k.error(e,"Error while fetching dfa products")}})()}),[a]);const m={products:(null==u?void 0:u.products)||[],shippingDataDTO:l,cartPriceDTO:c,handleAddToBag:async e=>{const r={deviceType:v.n6.DESKTOP,domain:"nykaa",catalog_tag_filter:"nykaa",pro:!0,items:[{productId:e,quantity:1}],pincode:d,originSource:v.di.CART,headers:{[Y.CE]:g}};try{await(0,S.dm)(r,o)&&t()}catch(e){(0,s.gk)((null==e?void 0:e.message)||"Something Went Wrong!")(i),f.k.error(e,"Error while adding item to bag")}}};return(0,V.jsx)(de.Z,m)};var pe=o(21042);const ge=e=>{let{isConvenienceFeeEnabled:t}=e;const o=(0,n.I0)(),i=(0,N.n)(),a=(0,n.v9)((e=>e.cartReducer.cartInfo)),{addressDTO:l,pincode:c}=a||{},d=(0,n.v9)((e=>e.remoteConfig.switches.cartEddWidget))||!1,[u,p]=(0,r.useState)(!1),[g,m]=(0,r.useState)(!1),[f,E]=(0,r.useState)([]),[O,w]=(0,r.useState)(""),{SOME_ITEMS_IN_YOU_CART_ARE_NON_SERVICEABLE:D}=C.CART_TEXT_MESSAGES;return(0,V.jsx)(pe.Z,{cartInfo:a,showModal:u,addresses:f,errMsg:O,deliveryCardHandler:async()=>{try{c||null!=l&&l.postcode||m(!0);let t=[];if(i){var e;const o={deviceType:v.n6.DESKTOP,catalog_tag_filter:"nykaa",domain:"nykaa",originSource:v.di.CART},r=await(0,S.Tf)(o);t=null==r||null===(e=r.addresses)||void 0===e?void 0:e.map((e=>{const{postcode:t,customerAddressId:o,city:r,firstName:n,lastName:i,street:a,isSetDefault:s}=e;return{postcode:t,addressId:o,city:r,firstName:n,lastName:i,street:a,is_set_default:s,isSelected:s}}))}E(t),setTimeout((()=>{p(!0)}),50)}catch(e){const{message:t}=e;(0,s.gk)(t)(o),m(!1)}},addressChangeHandler:async e=>{const{addressId:t,postcode:r}=e||{},n={addressId:t||"",pincode:c,headers:{[Y.CE]:d},originSource:v.di.CART,deviceType:v.n6.DESKTOP,catalog_tag_filter:"nykaa",domain:"nykaa"};try{await(0,S.qj)(n),(0,h.d8)(v.yV.PIN_CODE_FOR_DELIVERY,r||"",30),(0,h.d8)(v.yV.ADDRESS_ID_FOR_DELIVERY,t||"",30)}catch(e){const{message:t}=e;(0,s.gk)(t)(o)}finally{p(!1),m(!1)}},handlePinCodeChange:async(e,r)=>{try{const n={deviceType:v.n6.DESKTOP,catalog_tag_filter:"nykaa",domain:"nykaa",pincode:e,originSource:v.di.CART,headers:{[Y.CE]:d}},i=await(0,S.V_)(n,t),a=(0,b.E)(T.l.EDD_CHANGE_CLICK,i);(0,y.WC)(a.gtmData);let l=(0,b.E)(T.l.CART_CHANGE_DELIVERY_PINCODE,i);if(g&&(l=(0,b.E)(T.l.CART_CHECK_DELIVERY,i)),(0,y.WC)(l.gtmData),(0,_.Tp)(i))return void((0,_.ot)(i.items,v.i_)[0]?(w(D),p(!1)):r((0,_.hd)(i)));p(!1),(0,h.d8)(v.yV.PIN_CODE_FOR_DELIVERY,e||"",30),(0,h.d8)(v.yV.ADDRESS_ID_FOR_DELIVERY,"",30),m(!1),(0,s.$I)(i)(o)}catch(e){const{message:t}=e;(0,s.gk)(t)(o)}},setShowModal:p})};var me=o(85899),ve=o(14762),fe=o(25203),he=o(80710),Ee=o(45044);function ye(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,r)}return o}function Se(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?ye(Object(o),!0).forEach((function(t){var r,n,i;r=e,n=t,i=o[t],(n=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(n))in r?Object.defineProperty(r,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[n]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):ye(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}const Te=e=>{try{const i=fe.D.getItem(ve.TB.CONFIG);if(i){var t,o,r,n;const a=JSON.parse(i);(null!=a&&null!==(t=a.data)&&void 0!==t&&null!==(o=t.result)&&void 0!==o&&o.cartItemsTotal||0==(null==a||null===(r=a.data)||void 0===r||null===(n=r.result)||void 0===n?void 0:n.cartItemsTotal))&&(a.data.result.cartItemsTotal=e,(0,Ee.Yn)(a))}}catch(e){he.k.error(e,"Error Updating Quantity in storage")}},be=e=>{let{isConvenienceFeeEnabled:t}=e;const o=(0,n.I0)(),i=(0,N.n)(),a=(0,n.v9)((e=>e.cartReducer.cartInfo)),{cartEddWidget:l,cartFreeSampleNewDesignEnable:c,cartViewOffersForItem:d,cartExclusionMessageForOffers:u,cartItemDiscount:p}=(0,n.v9)((e=>e.remoteConfig.switches))||{},g=(0,n.v9)((e=>e.remoteConfig.configs.cartFreeGiftBanner))||{},[m,f]=(0,r.useState)(!1),[h,E]=(0,r.useState)(!1),{pincode:O,items:C}=a||{},_=async e=>{let{item:r}=e;const n=(null==r?void 0:r.productId)||"",i={deviceType:v.n6.DESKTOP,productIds:[n],originSource:v.di.CART,pincode:O,headers:{[Y.CE]:l},domain:"nykaa",catalog_tag_filter:"nykaa"};f(!0);try{const e=await(0,S.vF)(i,t);if(!h){const t=(0,b.E)(T.l.CART_ITEM_REMOVE,Se(Se({},r),{},{cartInfo:e})),o=(0,b.E)(T.l.REMOVE_FROM_CART_GTM,Se(Se({},r),{},{cartInfo:e}));(0,y.WC)(t.gtmData),(0,y.WC)(o.gtmData)}Te(null==e?void 0:e.quantity),(0,s.$I)(e)(o)}catch(e){(0,s.gk)((null==e?void 0:e.message)||"Something went wrong!")(o)}finally{f(!1),E(!1)}},w={updateItem:async e=>{let{item:r,qty:n}=e;const a=(null==r?void 0:r.productId)||"",c={deviceType:v.n6.DESKTOP,is_guest:i?0:1,pincode:O,items:[{qty:n,productId:a}],originSource:v.di.CART,headers:{[Y.CE]:l},domain:"nykaa",catalog_tag_filter:"nykaa"};f(!0);try{const e=await(0,S.Ic)(c,t);Te(null==e?void 0:e.quantity),(0,s.$I)(e)(o);const i=(0,b.E)(T.l.QUANTITY_UPDATE_GTM,{item:Se(Se({},r),{},{quantity:n}),oldQty:r.quantity,cartInfo:e});(0,y.WC)(i.gtmData)}catch(e){(0,s.gk)((null==e?void 0:e.message)||"Something went wrong!")(o)}finally{f(!1)}},removeItem:_,addToWishlist:async e=>{const t=(null==e?void 0:e.productId)||"",r={deviceType:v.n6.DESKTOP,host:v.di.CART,items:[t],originSource:v.di.CART,headers:{[Y.CE]:l},domain:"nykaa",catalog_tag_filter:"nykaa"};try{E(!0);const t=await(0,S.Mp)(r),o=(0,b.E)(T.l.CART_ITEM_ADD_TO_WISHLIST,Se(Se({},e),{},{cartInfo:t}));(0,y.WC)(o.gtmData),_({item:e})}catch(e){(0,s.gk)((null==e?void 0:e.message)||"Something went wrong!")(o)}},setToastMessage:e=>{e&&(0,s.gk)(e)(o)},handleTracking:e=>{let{type:t,data:o}=e;const r=(0,b.E)(t,o);(0,y.WC)(r.gtmData)},handleRedirection:e=>{window.location.href=e}};return m?(0,V.jsx)((()=>{const e=Array.from({length:null==C?void 0:C.length},((e,t)=>t));return(0,V.jsx)(r.Fragment,null,e.map((e=>(0,V.jsx)(ae.Z,{key:e}))))}),null):(0,V.jsx)(me.Z,{cartInfo:a,isGuest:!i,deviceType:v.n6.DESKTOP,callbacks:w,cartFreeGiftBanner:g,experiments:{cartFreeSampleNewDesignEnable:c,cartViewOffersForItem:d,cartExclusionMessageForOffers:u,cartItemDiscount:p}})},Oe=e=>{let{fetchCartInfo:t,isConvenienceFeeEnabled:o}=e;const i=(0,n.I0)(),{items:a,shippingDataDTO:l,cartPriceDTO:c,pincode:d}=(0,n.v9)((e=>e.cartReducer.cartInfo)),u=(0,n.v9)((e=>e.auth.user.groupId)),[p,g]=(0,r.useState)({}),m=(0,n.v9)((e=>{var t;return null===(t=e.remoteConfig.switches)||void 0===t?void 0:t.cartEddWidget}))||!1,h=((null==l?void 0:l.shippingChargeLimit)||0)-((null==c?void 0:c.subtotal)||0);(0,r.useEffect)((()=>{null!=a&&a.length&&(async()=>{const e={deviceType:v.n6.DESKTOP,ids:a.map((e=>e.productId)).join(","),pincode:d,originSource:v.di.CART,headers:{[Y.CE]:m},domain:"nykaa",catalog_tag_filter:"nykaa",algo:"default",customer_group_id:u};try{const t=await(0,S.xx)(e);t&&g(t)}catch(e){f.k.error(e,"Error while fetching dfa products")}})()}),[a]);const E={title:null==p?void 0:p.widgetTitle.replace("<value>",`₹${((null==l?void 0:l.appliedShippingCharge)||0).toString()}`),subTitle:p.widgetDesc.replace("<value>",`₹${h.toString()}`),products:(null==p?void 0:p.products)||[],shippingDataDTO:l,cartPriceDTO:c,handleAddToBag:async e=>{const r={deviceType:v.n6.DESKTOP,domain:"nykaa",catalog_tag_filter:"nykaa",pro:!0,items:[{productId:e,quantity:1}],pincode:d,originSource:v.di.CART,headers:{[Y.CE]:m}};try{await(0,S.dm)(r,o)&&t()}catch(e){(0,s.gk)((null==e?void 0:e.message)||"Something Went Wrong!")(i),f.k.error(e,"Error while adding item to bag")}}};return(0,V.jsx)(de.Z,E)};var Ce=o(96212);const _e=e=>{let{showBottomSheet:t,toggleShowOOSBottomSheet:o,isConvenienceFeeEnabled:r}=e;const i=(0,n.I0)(),a=(0,N.n)(),{items:l,pincode:c}=(0,n.v9)((e=>e.cartReducer.cartInfo)),d=(0,n.v9)((e=>e.remoteConfig.switches.cartEddWidget))||!1,u=(0,n.v9)((e=>{var t,o,r;return null==e||null===(t=e.remoteConfig)||void 0===t||null===(o=t.configs)||void 0===o||null===(r=o.cartGenericMessages)||void 0===r?void 0:r.oosMessages}))||{status:!1,messages:{}},p=async e=>{const t={deviceType:v.n6.DESKTOP,productIds:e,originSource:v.di.CART,pincode:c,headers:{[Y.CE]:d},domain:"nykaa",catalog_tag_filter:"nykaa"};try{const e=await(0,S.vF)(t,r),o=(0,b.E)(T.l.CART_ITEM_REMOVE,{cartInfo:e}),n=(0,b.E)(T.l.REMOVE_FROM_CART_GTM,{cartInfo:e});(0,ee.WC)(o.gtmData),(0,ee.WC)(n.gtmData),Te(null==e?void 0:e.quantity),(0,s.$I)(e)(i)}catch(e){(0,s.gk)("Something went wrong!")(i)}};return(0,V.jsx)(Ce.Z,{items:l,isGuest:!a,oosMessages:u,showBottomSheet:t,toggleBottomSheet:o,authHandler:()=>{window.location.href=L.pages.AUTH_PAGE},wishlistHandler:async e=>{const t={deviceType:v.n6.DESKTOP,host:v.di.CART,items:e,originSource:v.di.CART,headers:{[Y.CE]:d},domain:"nykaa",catalog_tag_filter:"nykaa"};try{const o=await(0,S.Mp)(t),r=(0,b.E)(T.l.CART_ITEM_ADD_TO_WISHLIST,{cartInfo:o});(0,ee.WC)(r.gtmData),p(e)}catch(e){(0,s.gk)("Something went wrong!")(i)}},removeHandler:p,deviceType:v.n6.DESKTOP})};var we=o(76861),De=o(56254);const Ie=()=>{const e=(0,we.useTheme)(),{rewardsDTO:t}=(0,n.v9)((e=>e.cartReducer.cartInfo)),{rewardPointsRecieve:o=0,baseRewardPoints:i=0}=t||{},[a,s]=(0,r.useState)(!1),{REDEEM_POINTS_ON_YOUR_NEXT_ORDER:l,EARN_DYNAMIC_REWARD_POINTS:c,REDEEM_TO_GET_A_DISCOUNT_ON_YOUR_NEXT_ORDER:d,YOUR_POINTS_WILL_GET_CREDITED_TO_YOUR_ACCOUNT_AFTER_ORDER_DELIVERY:u,POINTS_WILL_GET_CREDITED_TO_YOUR_ACCOUNT_ONCE_YOUR_ORDER_IS_DELIVERED:p,DYNAMIC_MULTIPLIER_APPLIED_ON_YOUR_POINTS:g,BASE_REWARD_POINTS:m,GOT_IT:f,DYNAMIC_POINTS:h}=C.CART_TEXT_MESSAGES,E=Math.round(o||0),y=Math.round(i||0),S=(0,_.Yl)(c,{rewardPoints:E}),T=(0,_.Yl)(h,{rewardPoints:E}),b=(0,_.Yl)(h,{rewardPoints:y}),O=(null==t?void 0:t.priveBand)||v.ET.non_member,w=S;let D=l;const I=S;let P,R=p;O==v.ET.non_member&&(D=d,P=[{bottomsheetKeyHTML:u,bottomsheetKeyTypography:e.typography.bodyMedium,bottomsheetKeyColor:e.colors.textSecondary}],R=(null==t?void 0:t.priveThresholdMessage)||""),((null==t?void 0:t.cartRewardsMultiplier)||0)>1&&(D=(0,_.Yl)(g,{multiplier:(null==t?void 0:t.cartRewardsMultiplier)||0}),P=[{bottomsheetKeyHTML:`<del>${m}</del>`,bottomsheetValueHTML:`<del>${b}</del>`,bottomsheetKeyTypography:e.typography.bodyMedium,bottomsheetValueTypography:e.typography.bodyMedium,bottomsheetKeyColor:e.colors.textDisabled,bottomsheetValueColor:e.colors.textDisabled},{bottomsheetKeyHTML:`${null==t?void 0:t.cartRewardsMultiplier}x ${(null==t?void 0:t.commonRulesDescription)||""}`,bottomsheetValueHTML:T,bottomsheetKeyTypography:e.typography.bodyMedium,bottomsheetValueTypography:e.typography.bodyMedium,bottomsheetKeyColor:e.colors.textSecondary,bottomsheetValueColor:e.colors.textSecondary}]);const j=()=>s((e=>!e)),x={title:w,priveBand:O,subtitleTop:D,bottomSheetInfoMessage:R,bottomSheetTitle:I,BottomSheetCTA:{text:f,onClick:j},bottomsheetKeyValuePair:P,showBottomsheet:a,subtitleBottom:"",onIconClick:j,onBottomsheetClose:j,deviceType:v.n6.DESKTOP};return E?(0,V.jsx)(De.Z,x):null},Pe=()=>{try{const e=window.location.href,t=new URL(e);return t.searchParams.get("source")||(t.searchParams.get("utm_source")?"deeplink":"")}catch(e){return f.k.error(e,"Error getting page source"),""}};var Re=o(90292);function je(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,r)}return o}function xe(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?je(Object(o),!0).forEach((function(t){var r,n,i;r=e,n=t,i=o[t],(n=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(n))in r?Object.defineProperty(r,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[n]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):je(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}const ke={fetchCartInfo:s.fB,setCartInfo:s.$I,rewardPointsApplied:s.OD,rewardPointsRemoved:s.W5,addItemToWishlist:s.yK,removeItem:s.cl,itemQuantityUpdate:s.mU,setToastMessage:s.gk,getFreeSamples:s.O5},Ae=(0,n.$j)((e=>{const{auth:t,cartReducer:o}=e;return{formKey:t.user.formKey,cartInfo:o.cartInfo,loading:o.loading,shoppingBagError:o.error,toastMsg:o.toastMessage,freeSamples:o.freeSamples}}),ke)((e=>{let{setCartInfo:t,setToastMessage:o,getFreeSamples:i,toggleCouponPage:a}=e;console.log("Migrated Shopping Bag");const[s,O]=(0,r.useState)(!1),[C,_]=(0,r.useState)(!0),[w,I]=(0,r.useState)(!1),[R,j]=(0,r.useState)(!1),[x,k]=(0,r.useState)(!1),A=(0,N.n)(),{cartInfo:M,toastMessage:B}=(0,n.v9)((e=>e.cartReducer)),G=(0,n.v9)((e=>e.auth.user))||{},H=(0,n.v9)((e=>(0,oe.gi)(e,te.f6,"A")))||!1,Y=(0,n.v9)((e=>(0,oe.gi)(e,te.yR,"A")))||!1,U=(0,n.v9)((e=>(0,oe.gi)(e,te.Ot,"A")))||!1,Z=(0,Re.O7)(),q=(0,n.v9)((e=>(0,oe.gi)(e,te.nG,"A")))||!1,Q=(0,n.v9)((e=>{var t;return null===(t=e.remoteConfig.switches)||void 0===t?void 0:t.convenienceChargesEnabled})),{cartEddWidget:J,cartAvoidShipping:ee,cartItemDiscount:re,cartMultiCouponEnabled:ne}=(0,n.v9)((e=>e.remoteConfig.switches)),{items:ae,cartPageBottomCommunicationMessages:se,deltaCommunicationDTO:le,shippingDataDTO:de,cartPriceDTO:pe,rewardsDTO:me}=M||{},{freeSamplesCommunicationDTO:ve}=le||{},{shippingChargeLimit:fe}=de||{},he=ee&&(fe||0)>((null==pe?void 0:pe.bagTotal)||0),Ee=async()=>{j(!0);const e=(0,h.ej)(v.yV.ADDRESS_ID_FOR_DELIVERY).toString()||"",o=(0,h.ej)(v.yV.PIN_CODE_FOR_DELIVERY).toString()||"",r={deviceType:v.n6.DESKTOP,originSource:v.di.CART,domain:"nykaa",catalog_tag_filter:"nykaa"};o&&!e&&(r.pincode=o);try{const e=await(0,S.V_)(r,Z);if(e){var n,i;Te(null==e?void 0:e.quantity);const o=(0,b.E)(T.l.DATA_LOAD,xe({},e)),r=(0,b.E)(T.l.DATA_LOAD_MIXPANEL,xe(xe({},e),{},{userData:G,isOOSBottomsheetValid:x,isAvoidShippingValid:he,dfaVisible:H,EDDSwitch:J,interactionLocation:Pe(),isBestCouponEnabled:Y,bestCoupon:null==e?void 0:e.bestCoupon,network_type:(null===(n=navigator)||void 0===n||null===(i=n.connection)||void 0===i?void 0:i.effectiveType)||"",enableItemDiscount:re,isConvenienceFeeEnabled:Z}));(0,y.WC)(o.gtmData),setTimeout((()=>{(0,y.WC)(r.gtmData)}),0),t(e)}}catch(e){I(!0),f.k.error(e,"Error while fetching cart info")}finally{j(!1)}};(0,r.useEffect)((()=>{_(!0)}),[M.itemCount]);const ye=()=>{_((e=>!e))};(0,r.useEffect)((()=>{Ee()}),[]);const Se=()=>{O(!1),Ee()},Ce=()=>{k((e=>!e))},we=Object.keys(M).length>0&&ae.length>0;return R?(0,V.jsx)(D,{onClick:e=>null==e?void 0:e.stopPropagation()},(0,V.jsx)(K,{showPickFreeSampleScreen:s,handleFreeSampleBack:Se}),(0,V.jsx)(P,null,(0,V.jsx)(l.Z,null))):w?(0,V.jsx)(D,{onClick:e=>null==e?void 0:e.stopPropagation()},(0,V.jsx)(K,{showPickFreeSampleScreen:s,handleFreeSampleBack:Se}),(0,V.jsx)(d.Z,{action:()=>{window.location.reload()}})):0===M.quantity?(0,V.jsx)(D,{onClick:e=>null==e?void 0:e.stopPropagation()},(0,V.jsx)(K,{showPickFreeSampleScreen:s,handleFreeSampleBack:Se}),(0,V.jsx)(P,null,ve&&C&&(0,V.jsx)(X,{freeSamplesCommunicationDTO:ve,togleShowRestoreBag:ye}),(0,V.jsx)(p.Z,{experiments:{emptyCartExpEnabled:q},action:()=>window.location.href=L.pages.HOME}))):s?(0,V.jsx)(D,{onClick:e=>null==e?void 0:e.stopPropagation()},(0,V.jsx)(K,{showPickFreeSampleScreen:s,handleFreeSampleBack:Se}),(0,V.jsx)(ce,{togleShowPickFreeSamplesScreen:Se,isConvenienceFeeEnabled:Z})):(0,V.jsx)(D,{onClick:e=>null==e?void 0:e.stopPropagation()},(0,V.jsx)(K,{showPickFreeSampleScreen:s,handleFreeSampleBack:Se}),(0,V.jsx)(P,null,we?(0,V.jsx)(r.Fragment,null,(0,V.jsx)(W,null),(0,V.jsx)(_e,{showBottomSheet:x,toggleShowOOSBottomSheet:Ce,isConvenienceFeeEnabled:Z}),J&&(0,V.jsx)(ge,{isConvenienceFeeEnabled:Z}),(0,V.jsx)($,{clickHandler:async()=>{O(!0),(async()=>{const e={deviceType:v.n6.DESKTOP,originSource:v.di.CART,domain:"nykaa"};try{await i(e,Z)}catch(e){o("Something went wrong!"),f.k.error(e,"Error while fetching free samples")}})()}}),(0,V.jsx)(z,{isConvenienceFeeEnabled:Z}),!A&&(0,V.jsx)(g.Z,{rewardsDTO:me||{},action:()=>{window.location.href=L.pages.AUTH_PAGE}}),(0,V.jsx)(be,{isConvenienceFeeEnabled:Z}),ve&&C&&(0,V.jsx)(X,{freeSamplesCommunicationDTO:ve,togleShowRestoreBag:ye,isConvenienceFeeEnabled:Z}),(0,V.jsx)(u.Z,{cartInfo:M,experiments:{isMultiCouponsVisible:ne},handleCouponRedirection:()=>{a()}}),(0,V.jsx)(m.Z,{cartInfo:M,experiments:{convenienceChargesEnabled:Q,isConvenienceFeeEnabled:Z},deviceType:v.n6.DESKTOP}),!(!A||!U)&&(0,V.jsx)(Ie,null),!(null==se||!se.length)&&(0,V.jsx)(c.Z,{messages:se}),(0,V.jsx)(F,null),he&&(0,V.jsx)(Oe,{fetchCartInfo:Ee,isConvenienceFeeEnabled:Z}),H&&(0,V.jsx)(ue,{fetchCartInfo:Ee,isConvenienceFeeEnabled:Z})):(0,V.jsx)(l.Z,null)),B&&(0,V.jsx)(E.Z,{variant:E.c.single,hideTimer:!0,message:B,timer:2,onDismiss:()=>o("")}),(0,V.jsx)(ie,{toggleShowOOSBottomSheet:Ce,isConvenienceFeeEnabled:Z}))}));var Me=o(36409);const Fe=i.Z.iframe`
  height: 100vh;
  width: 400px;
`,Be=e=>{let{hideHandler:t}=e;const o=(0,n.v9)((e=>(0,oe.gi)(e,Me.ab,"A")))||!1,[i,s]=(0,r.useState)(!1);return(0,r.useEffect)((()=>{o&&(window.handleCouponsBack=()=>{s(!1)})}),[o]),(0,V.jsx)(a.Z,{modalBackground:"transparent",onHide:()=>{t&&t()}},i?o?(0,V.jsx)(Fe,{src:L.pages.CART_COUPONS}):null:o?(0,V.jsx)(Ae,{toggleCouponPage:()=>{s((e=>!e))}}):(0,V.jsx)(Fe,{src:"/mobileCartIframe?ptype=customIframeCart"}))}}}]);